<!DOCTYPE html>

@@model BloodLife.Models.PATIENT
@model IEnumerable<BloodLife.ViewModels.PatientProductViewModel>

<html>
<head>
    <title>UMMC Blood Transfusion Information System</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="~/Content/w3.css">
    <link rel="stylesheet" href="~/Content/Site.css">
    <link rel="stylesheet" href="~/Content/custom.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        html, body, h1, h2, h3, h4, h5 {
            font-family: "Raleway", sans-serif
        }
    </style>

    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">

</head>

<body class="w3-light-grey">

<!-- Top container -->
<div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
  <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
  <span class="w3-bar-item w3-right">UMMC Blood Transfusion Information System</span>
</div>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
  <div class="w3-container w3-row">
  </div>
  <hr>
  <div class="w3-container">
    <h5>Dashboard</h5>
  </div>
  <div class="w3-bar-block">
    <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>
    <a href="#" class="w3-bar-item w3-button w3-padding w3-blue"><i class="	fa fa-id-card-o"></i>  Patient Overview</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-heart"></i>  Transfusion History</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-file-text-o"></i>  Transfusion Tests</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-cart-plus"></i>  Place A Request</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-stethoscope"></i>  Obtain Blood Sample</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-plus-square"></i>  Review Blood Status</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-hotel"></i>  Record Transfusion</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-credit-card fa-fw"></i>   Billing</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-info-circle"></i>  Guidelines</a>
    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-cog"></i>  Settings</a><br><br>
  </div>
</nav>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px;margin-top:43px;">

    <!-- Header -->
    <header class="w3-container" style="padding-top:22px">
        <h5>
            <b>
                <i class="fa fa-heart"></i> @Html.DisplayFor(model => model.FirstOrDefault().NAME) |
                RN: @Html.DisplayFor(model => model.FirstOrDefault().PATNUMBERSHORT) |
                DOB: @Html.DisplayFor(model => model.FirstOrDefault().BIRTHDATE)  |
                Sex: @Html.DisplayFor(model => model.FirstOrDefault().SEXLONG)
            </b>
        </h5>
    </header>

    <div class="w3-row-padding w3-margin-bottom">
        <div class="w3-third">
            <div class="w3-container w3-red w3-padding-16">
                <div class="w3-left">
                    <div class="w3-clear"><h1><b>@Html.DisplayFor(model => model.FirstOrDefault().PATGROUP) </b></h1></div>
                </div>
                <div class="w3-right">
                    <img src="~/Content/img/blood.png" style="width:64px;height:64px;" />
                </div>
            </div>
        </div>
        <div class="w3-third">
            <div class="w3-container w3-blue w3-padding-16">
                <div class="w3-left">
                    <div class="w3-clear"><h1><b>@Html.DisplayFor(model => model.FirstOrDefault().ABSHORT)</b></h1></div>
                </div>
                <div class="w3-right">
                    <img src="~/Content/img/blood-donation.png" style="width:64px;height:64px;" />
                </div>
            </div>
        </div>
        <div class="w3-third">
            <div class="w3-container w3-teal w3-padding-16">
                <div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
                <div class="w3-clear"></div>
                <h4>Alerts and special requirements</h4>
            </div>
        </div>
    </div>
    <div class="w3-row-padding w3-red w3-margin">
        <p>Current status of patient and ongoing testing </p>
    </div>

    <!--Accordion for review of results and product status-->
    <style>
        .acc-kontainer {
            width: 100%;
            margin: auto;
        }

            .acc-kontainer .acc-body {
                width: 98%;
                width: calc(100% - 20px);
                margin: 0 auto;
                height: 0;
                color: rgba(0,0,0,0);
                background-color: rgba(255,255,255,0.2);
                line-height: 28px;
                padding: 0 20px;
                box-sizing: border-box;
                transition: 0.5s;
            }

            .acc-kontainer label {
                cursor: pointer;
                background-color: rgba(255,255,255,0.1);
                border-bottom: 1px solid rgba(255,255,255,0.1);
                display: block;
                padding: 15px;
                width: 100%;
                color: #fff;
                font-weight: 400;
                box-sizing: border-box;
                z-index: 100;
            }

            .acc-kontainer input {
                display: none;
            }

            .acc-kontainer label:before {
                font-family: 'FontAwesome';
                content: '\f067';
                font-weight: bolder;
                float: right;
            }

            .acc-kontainer input:checked + label:before {
                font-family: 'FontAwesome';
                content: '\f00d';
                transition: 0.5s;
            }

            .acc-kontainer input:checked ~ .acc-body {
                height: auto;
                color: #fff;
                font-size: 16px;
                padding: 20px;
                transition: 0.5s;
            }
    </style>

    <div class="w3-container w3-amber">
        <div class="acc-kontainer">
            <div>
                <input type="radio" name="acc" id="acc1" checked />
                <label for="acc1">
                    <i class="fa fa-bars"></i>Requests and results
                </label>
                <div class="acc-body">
                    List of requests and their results
                </div>
            </div>
            <div>
                <input type="radio" name="acc" id="acc2" />
                <label for="acc2">
                    <i class="fa fa-heart"></i>Red cells transfused
                </label>
                <div class="acc-body">
                    List all red cell transfusions
                </div>
            </div>
        </div>
    </div>

    <!--Previous accordion-->
    <div class="container">
        <div class="panel-group" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Requests and results</a>
                    </h4>
                </div>
                <div id="collapse1" class="panel-collapse collapse in">
                    <div class="panel-body">
                        Number of requests: @ViewBag.TestCount
                        <table>
                            <tr>
                                <th>Access No.</th>
                                <th>Date </th>
                            </tr>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@item.ACCESSNUMBER</td>
                                    <td>@item.REQDATE</td>
                                </tr>
                            }
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Red blood cells @ViewBag.Rccount</a>
                    </h4>
                </div>
                <div id="collapse2" class="panel-collapse collapse">
                    <div class="panel-body">
                        @if (ViewBag.Rccount > 0)
                        {
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Request Date</th>
                                        <th>Time</th>
                                        <th>RC Type</th>
                                        <th>Pack ID</th>
                                        <th>History</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                        if (item.PRODNUM != null && item.PRODCODE.Substring(0, 2) == "RC")
                                        {
                                            <tr>
                                                <td>@item.ACCESSNUMBER</td>
                                                <td>@Html.DisplayFor(modelItem => item.REQDATE)</td>
                                                <td>@item.PRODCODE</td>
                                                <td>@item.PRODNUM</td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        }
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Platelets</a>
                    </h4>
                </div>
                <div id="collapse3" class="panel-collapse collapse">
                    <div class="panel-body">
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h2></h2>

    <!--Tabs for selection of requests-->

    <div class="w3-container">

        <input id="tab1" type="radio" name="tabs" checked>
        <label for="tab1">Tests Only</label>

        <input id="tab2" type="radio" name="tabs">
        <label for="tab2">Red Cells</label>

        <input id="tab3" type="radio" name="tabs">
        <label for="tab3">Platelets</label>

        <input id="tab4" type="radio" name="tabs">
        <label for="tab4">Plasma Products</label>

        <input id="tab5" type="radio" name="tabs">
        <label for="tab5">When Required?</label>


        <section id="content1">
            <div class="shopping-cart">
                <div class="title">Tests</div>
            </div>

            <p>
                Select tests
            </p>
            <p>
                List of tests
            </p>
        </section>

        <section id="content2">
            <div class="shopping-cart">
                <div class="title">Red cells</div>
            </div>

            <p>Select suitable products and required quantity. Remember more is not better.</p>

            <div class="w3-third">
                <div class="form-group">
                    @Html.DropDownList("RbcProducts", (IEnumerable<SelectListItem>)ViewBag.RbcProducts, "Select RBC product", new { @class = "form-control" })
                    @Html.DropDownList("UnitQuantity", (IEnumerable<SelectListItem>)ViewBag.UnitQuantity, "Number of units required", new { @class = "form-control" })
                    @Html.DropDownList("SecondProcess", (IEnumerable<SelectListItem>)ViewBag.SecondProcess, "Any required additional processing?", new { @class = "form-control" })
                </div>
            </div>
            <div class="w3-twothird">
                <div class="form-group">
                    @Html.DropDownList("RbcIndication", (IEnumerable<SelectListItem>)ViewBag.RbcIndication, "Select most appropriate indication", new { @class = "form-control" })
                </div>
            </div>


        </section>

        <section id="content3">
            <div class="shopping-cart">
                <div class="title">Platelets</div>
            </div>

            <p>
                Select platelet product
            </p>
            <p>
                Product list and indications
            </p>
        </section>

        <section id="content4">
            <div class="shopping-cart">
                <div class="title">Plasma products</div>
            </div>

            <p>
                Select plasma product
            </p>
            <p>
                Product list and indications
            </p>
        </section>

        <section id="content5">
            <div class="shopping-cart">
                <div class="title">When required?</div>
            </div>

            <p>
                Select time
            </p>
            <p>
                Indication list
        </section>

    </div>



    <br>
    <div class="w3-container w3-dark-grey w3-padding-32">
        <div class="w3-row">
            <div class="w3-container w3-third">
                <h5 class="w3-bottombar w3-border-green">Demographics</h5>
                <!--
                <p>Language</p>
                <p>Country</p>
                <p>City</p>
                -->
            </div>
            <div class="w3-container w3-third">
                <h5 class="w3-bottombar w3-border-red">Blood Stock Levels</h5>
                <!--
                <p>Browser</p>
                <p>OS</p>
                <p>More</p>
                -->
            </div>
            <div class="w3-container w3-third">
                <h5 class="w3-bottombar w3-border-orange">Guidelines</h5>
                <!--
                <p>Users</p>
                <p>Active</p>
                <p>Geo</p>
                <p>Interests</p>
                -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="w3-container w3-padding-16 w3-light-grey">
        <h4>USE BLOOD WISELY</h4>
        <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </footer>

    <!-- End page content -->
</div>

<script>
    // Get the Sidebar
    var mySidebar = document.getElementById("mySidebar");

    // Get the DIV with overlay effect
    var overlayBg = document.getElementById("myOverlay");

    // Toggle between showing and hiding the sidebar, and add overlay effect
    function w3_open() {
        if (mySidebar.style.display === 'block') {
            mySidebar.style.display = 'none';
            overlayBg.style.display = "none";
        } else {
            mySidebar.style.display = 'block';
            overlayBg.style.display = "block";
        }
    }

    // Close the sidebar with the close button
    function w3_close() {
        mySidebar.style.display = "none";
        overlayBg.style.display = "none";
    }


</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

</body>
</html>
